# การประมวลผลชุดข้อมูล (Dataset processing)
ประกอบด้วยสคริปต์สำหรับการรวมและสุ่มตัวอย่างชุดข้อมูลโดยใช้ไลบรารี HuggingFace datasets ซึ่งออกแบบมาเพื่อให้ทำงานบน cluster computing โดยใช้ SLURM

## วิธีการใช้งาน (Usage)
### การรวมชุดข้อมูล (Combining Datasets)
สคริปต์ `combine_dataset.py` ใช้สำหรับรวมชุดข้อมูลสองชุดโดยการสุ่มตัวอย่างตามสัดส่วนของแต่ละชุดข้อมูลแล้วนำมารวมกัน

#### คำสั่งผ่าน Command-line
- `--dataset_path_1`: เส้นทางไปยังชุดข้อมูลที่หนึ่ง (จำเป็น)
- `--dataset_path_2`: เส้นทางไปยังชุดข้อมูลที่สอง (จำเป็น)
- `--output_path`: เส้นทางที่จะบันทึกชุดข้อมูลที่รวมกันแล้ว (จำเป็น)
- `--is_local`: ชุดข้อมูลถูกโหลดจากไฟล์ในเครื่องหรือไม่ (ไม่จำเป็น, ค่าเริ่มต้น: False)
- `--ratio_1`: อัตราการสุ่มตัวอย่างสำหรับชุดข้อมูลที่หนึ่ง โดยอ้างอิงจากชุดข้อมูลที่มีจำนวนน้อยกว่า (ไม่จำเป็น, ค่าเริ่มต้น: 1.0)
- `--ratio_2`: อัตราการสุ่มตัวอย่างสำหรับชุดข้อมูลที่สอง โดยอ้างอิงจากชุดข้อมูลที่มีจำนวนน้อยกว่า (ไม่จำเป็น, ค่าเริ่มต้น: 1.0)
- `--split`: ส่วนของชุดข้อมูลที่จะโหลด (เช่น train, test, validation) (ไม่จำเป็น, ค่าเริ่มต้น: train)
- `--seed`: ค่า seed สำหรับการสลับตัวอย่างแบบสุ่ม (ไม่จำเป็น, ค่าเริ่มต้น: 42)
- `--num_proc`: จำนวนกระบวนการสำหรับการตัดคำ (ไม่จำเป็น, ค่าเริ่มต้น: จำนวนคอร์ของ CPU)

#### ตัวอย่างการใช้งาน (Example Usage)
```bash
python combine_dataset.py \
    --dataset_path_1 /path/to/dataset_1 \
    --dataset_path_2 /path/to/dataset_2 \
    --output_path /path/to/output \
    --ratio_1 1.0 \
    --ratio_2 1.0 \
    --split train \
    --seed 42 \
    --is_local
```
> Note: ratio 1.0 หมายถึง ขนาดเต็มของชุดข้อมูลที่มีขนาดเล็กกว่า


### การสุ่มตัวอย่างชุดข้อมูล (Sampling Datasets)
สคริปต์ `sample_dataset.py` ใช้สำหรับสุ่มตัวอย่างส่วนหนึ่งของชุดข้อมูลตามอัตราที่กำหนดและบันทึกชุดข้อมูลที่สุ่มตัวอย่างแล้ว

#### คำสั่งผ่าน Command-line
- `--dataset_path`: เส้นทางไปยังชุดข้อมูล (จำเป็น)
- `--output_path`: เส้นทางที่จะบันทึกชุดข้อมูลที่สุ่มตัวอย่างแล้ว (จำเป็น)
- `--is_local`: ชุดข้อมูลถูกโหลดจากไฟล์ในเครื่องหรือไม่ (ไม่จำเป็น, ค่าเริ่มต้น: False)
- `--ratio`: อัตราการสุ่มตัวอย่าง (ไม่จำเป็น, ค่าเริ่มต้น: 0.8)
- `--seed`: ค่า seed สำหรับการสลับตัวอย่างแบบสุ่ม (ไม่จำเป็น, ค่าเริ่มต้น: 42)
- `--num_proc`: จำนวนกระบวนการสำหรับการตัดคำ (ไม่จำเป็น, ค่าเริ่มต้น: จำนวนคอร์ของ CPU)

### ตัวอย่างการใช้งาน (Example Usage)
```bash
คัดลอกโค้ด
python sample_dataset.py \
    --dataset_path /path/to/dataset \
    --output_path /path/to/output \
    --ratio 0.8 \
    --seed 42 \
    --is_local
```

### สคริปต์ SLURM (SLURM Job Scripts)
มีสคริปต์งาน SLURM สำหรับเรียกใช้สคริปต์การรวมและสุ่มตัวอย่างชุดข้อมูลบน cluster computing
- `combine_dataset.sh` สคริปต์นี้จะส่งงานเพื่อรวมชุดข้อมูลสองชุด
- `sample_dataset.sh` สคริปต์นี้จะส่งงานเพื่อสุ่มตัวอย่างชุดข้อมูล
